var Arbiter=function(){var a=function(){var b={},c={},d={},e={},f=1;return{version:"1.0",updated_on:"2011-12-19",create:function(){return a()},subscribe:function(){var a,g,h,i,j,k,l,m,n={},o=!1,p=0,q=[];if(arguments.length<2)return null;g=arguments[0],k=arguments[arguments.length-1],arguments.length>2&&(n=arguments[1]||{}),arguments.length>3&&(l=arguments[2]),n.priority&&(p=n.priority),"string"==typeof g&&(g=g.split(/[,\s]+/));for(var r=0;r<g.length;r++)if(a=g[r],/\*$/.test(a)?(o=!0,a=a.replace(/\*$/,""),h=c[a],h||(c[a]=h=[])):(h=b[a],h||(b[a]=h=[])),m=f++,j={id:m,f:k,p:p,self:l,options:n},e[m]=j,h.push(j),h=h.sort(function(a,b){return a.p>b.p?-1:a.p==b.p?0:1}),o?c[a]=h:b[a]=h,q.push(m),!n.persist&&d[a]){i=d[a];for(var s=0;s<i.length;s++)j.f.call(j.self,i[s],{persist:!0})}return g.length>0?q:q[0]},publish:function(a,e,f){var g,h,i,j=10,k=!0,l=!0,m={},n=b[a]||[];f=f||{};for(i in c)0==a.indexOf(i)&&(n=n.concat(c[i]));if(f.persist===!0&&(d[a]||(d[a]=[]),d[a].push(e)),0==n.length)return k;"boolean"==typeof f.cancelable&&(l=f.cancelable);for(var o=0;o<n.length;o++)if(h=n[o],!h.unsubscribed)try{if(f.async===!0||h.options&&h.options.async)setTimeout(function(b){return function(){b.f.call(b.self,e,a,m)}}(h),j++);else if(g=h.f.call(h.self,e,a,m),l&&g===!1)break}catch(p){k=!1}return k},unsubscribe:function(a){return e[a]?(e[a].unsubscribed=!0,!0):!1},resubscribe:function(a){return e[a]?(e[a].unsubscribed=!1,!0):!1}}};return a()}();